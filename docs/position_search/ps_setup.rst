How to Set Up
=============

Installation of Samtools is required by VCF position search, please check `Samtools <http://www.htslib.org/>`_ for detail.

Prepare files
-------------
Corresponding compressed file and index file are required for each vcf file. Compressed VCF file can be generated by bash code:

.. code:: bash

 bgzip -c your_vcf_file.vcf > your_vcf_file.vcf.gz


Generate tbi format index:

.. code:: bash

 bcftools index your_vcf_file.vcf.gz


Or, generate csi format index:

.. code:: bash

 tabix -C your_vcf_file.vcf.gz


.. note::

 Please move prepared files to the directory provided in VCF Bulk Loader.

Test with test files
--------------------

Test files are included in this module and it's recommended to test before use.

.. note::

  Test files (in vcf_filter/tests/test_files/) include: test_file_1.vcf, test_file_1.vcf.gz, test_file_1.vcf.gz.csi for test1 and test_short2.vcf, test_short2.vcf.gz, test_short2.vcf.gz.csi for test2.


- add both tests to VCF Bulk Loader in admin->Tripal->Extensions->VCF Filter->add as test1 and test2

- give proper access to both tests, and check if compressed vcf file and index file are provided

- search in Position Search: search for 19p111 should give results for both test1 and test2, search for Xp9 should give result for test1 only and search for 20p120 should give result for test2 only

- delete tests in VCF Bulk Loader
